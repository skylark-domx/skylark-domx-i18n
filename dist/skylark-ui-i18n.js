/**
 * skylark-ui-i18n - The filer features enhancement for skylark utils.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.1
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(e,r){var t=r.define,n=r.require,a="function"==typeof t&&t.amd,i=!a&&"undefined"!=typeof exports;if(!a&&!t){var o={};t=r.define=function(e,r,t){"function"==typeof t?(o[e]={factory:t,deps:r.map(function(r){return function(e,r){if("."!==e[0])return e;var t=r.split("/"),n=e.split("/");t.pop();for(var a=0;a<n.length;a++)"."!=n[a]&&(".."==n[a]?t.pop():t.push(n[a]));return t.join("/")}(r,e)}),resolved:!1,exports:null},n(e)):o[e]={factory:null,resolved:!0,exports:t}},n=r.require=function(e){if(!o.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var t=o[e];if(!t.resolved){var a=[];t.deps.forEach(function(e){a.push(n(e))}),t.exports=t.factory.apply(r,a)||null,t.resolved=!0}return t.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,r){e("skylark-ui-i18n/i18n",["skylark-langx/skylark"],function(e){return e.attach("ui.i18n",{escape:function(e){return"string"==typeof e?e.replace(/\[\[/g,"&lsqb;&lsqb;").replace(/\]\]/g,"&rsqb;&rsqb;"):e},unescape:function(e){return"string"==typeof e?e.replace(/&lsqb;|\\\[/g,"[").replace(/&rsqb;|\\\]/g,"]"):e},compile:function(){var e=Array.prototype.slice.call(arguments,0).map(function(e){return String(e).replace(/%/g,"&#37;").replace(/,/g,"&#44;")});return"[["+e.join(", ")+"]]"}})}),e("skylark-ui-i18n/Translator",["skylark-langx/langx","./i18n"],function(e,t){var n=Object.freeze({amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830});function a(r){return e.escapeHTML((t=String(r).replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,""),String(t).replace(/&#(\d+);?/g,function(e,r){return String.fromCharCode(r)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(e,r){return String.fromCharCode(parseInt(r,16))}).replace(/&([^;\W]+;?)/g,function(e,r){var t=r.replace(/;$/,""),a=n[r]||r.match(/;$/)&&n[t];return"number"==typeof a?String.fromCharCode(a):"string"==typeof a?a:e})));var t}var i=function(){console.warn.apply(console,arguments)};Object.assign||jQuery.extend;function o(e){if(!e)throw new TypeError("Parameter `language` must be a language string. Received "+e+(""===e?"(empty string)":""));this.modules=Object.keys(o.moduleFactories).map(function(r){var t=o.moduleFactories[r];return[r,t(e)]}).reduce(function(e,r){var t=r[0],n=r[1];return e[t]=n,e},{}),this.lang=e,this.translations={}}return o.prototype.load=function(e,r){return Promise.resolve(jQuery.getJSON(config.relative_path+"/assets/language/"+e+"/"+r+".json?"+config["cache-buster"]))},o.prototype.translate=function(e){var r=new RegExp("[a-zA-Z0-9\\-_.\\/]"),t=new RegExp("[^a-zA-Z0-9\\-_.\\/\\]]"),n=0,a=0,i=e.length,o=[],s=!1;function l(e){for(var r=e.length,t=[],n=0,a=0,i=0;n+2<=r;)"["===e[n]&&"["===e[n+1]?(i+=1,n+=1):"]"===e[n]&&"]"===e[n+1]?(i-=1,n+=1):0===i&&","===e[n]&&"\\"!==e[n-1]&&(t.push(e.slice(a,n).trim()),a=n+=1),n+=1;return t.push(e.slice(a,n+1).trim()),t}for(n=e.indexOf("[[",n);n+2<=i&&-1!==n;){o.push(e.slice(a,n)),a=n+=2,s=!0;for(var u,c,f=0,p=!1,g=!1,d=!1,m=!1;n+2<=i;)if(u=e[n],c=e[n+1],!p&&r.test(u))p=!0,n+=1;else if(p&&!g&&":"===u)g=!0,n+=1;else if(g&&!d&&r.test(u))d=!0,n+=1;else if(d&&!m&&","===u)m=!0,n+=1;else if(p&&g&&d&&m||!t.test(u))if("["===u&&"["===c)f+=1,n+=2;else if("]"===u&&"]"===c){if(0===f){var h=e.slice(a,n),y=l(h),v=y[0],k=y.slice(1),b="";k&&k.length&&(b=this.translate(h)),o.push(this.translateKey(v,k,b)),a=n+=2,s=!1;break}f-=1,n+=2}else n+=1;else{if(n+=1,a-=2,s=!1,!(f>0))break;f-=1}n=e.indexOf("[[",n)}var q=e.slice(a);return s&&(q=this.translate(q)),o.push(q),Promise.all(o).then(function(e){return e.join("")})},o.prototype.translateKey=function(e,r,t){var n=this,o=e.split(":",2),s=o[0],l=o[1];if(n.modules[s])return Promise.resolve(n.modules[s](l,r));if(s&&!l)return i('Missing key in translation token "'+e+'"'),Promise.resolve("[["+s+"]]");var u=this.getTranslation(s,l);return u.then(function(o){if(!o)return i('Missing translation "'+e+'"'),t||l;var s=r.map(function(e){return n.translate(a(e))});return Promise.all(s).then(function(e){var r=o;return e.forEach(function(e,t){var n=e.replace(/%(?=\d)/g,"&#37;").replace(/\\,/g,"&#44;");r=r.replace(new RegExp("%"+(t+1),"g"),n)}),r})})},o.prototype.getTranslation=function(e,r){var t;return e?(this.translations[e]=this.translations[e]||this.load(this.lang,e).catch(function(){return{}}),t=this.translations[e]):(i("[translator] Parameter `namespace` is "+e+(""===e?"(empty string)":"")),t=Promise.resolve({})),r?t.then(function(e){return e&&e[r]}):t},o.prototype.translateInPlace=function(e,r){r=r||["placeholder","title"];var t=function(e){var r=[];return function e(t){if(3===t.nodeType)r.push(t);else for(var n=0,a=t.childNodes,i=a.length;n<i;n+=1)e(a[n])}(e),r}(e),n=t.map(function(e){return e.nodeValue}).join("  ||  "),a=r.reduce(function(r,t){var n=Array.prototype.map.call(e.querySelectorAll("["+t+'*="[["]'),function(e){return[t,e]});return r.concat(n)},[]),i=a.map(function(e){return e[1].getAttribute(e[0])}).join("  ||  ");return Promise.all([this.translate(n),this.translate(i)]).then(function(e){var r=e[0],n=e[1];r&&r.split("  ||  ").forEach(function(e,r){$(t[r]).replaceWith(e)}),n&&n.split("  ||  ").forEach(function(e,r){a[r][1].setAttribute(a[r][0],e)})})},o.getLanguage=function(){var e;if("object"==typeof window&&window.config&&window.utils)e=utils.params().lang||config.userLang||config.defaultLang||"en-GB";else{var t=r("../../../src/meta");e=t.config&&t.config.defaultLang?t.config.defaultLang:"en-GB"}return e},o.create=function(e){return e||(e=o.getLanguage()),o.cache[e]=o.cache[e]||new o(e),o.cache[e]},o.cache={},o.registerModule=function(e,r){o.moduleFactories[e]=r,Object.keys(o.cache).forEach(function(t){var n=o.cache[t];n.modules[e]=r(n.lang)})},o.moduleFactories={},o.removePatterns=function(e){for(var r,t=e.length,n=0,a=0,i=0,o="";n<t;)"[["===(r=e.slice(n,n+2))?(0===i&&(o+=e.slice(a,n)),i+=1,n+=2):"]]"===r?(n+=2,0===(i-=1)&&(a=n)):n+=1;return o+=e.slice(a,n)},t.Translator=o}),e("skylark-ui-i18n/translate",["./i18n","./Translator"],function(e,r){return e.translate=function(e,t,n){var a=n,i=t;"function"==typeof t&&(a=t,i=null);if(!("string"==typeof e||e instanceof String)||""===e)return a("");return r.create(i).translate(e).then(function(e){return a&&setTimeout(a,0,e),e},function(e){console.warn("Translation failed: "+e.stack)})}}),e("skylark-ui-i18n/prepareDom",["skylark-utils-dom/query","./i18n","./translate"],function(e,r,t){return r.prepareDOM=function(){t("[[language:dir]]",function(r){r&&!e("html").attr("data-dir")&&e("html").css("direction",r).attr("data-dir",r)})}}),e("skylark-ui-i18n/addTranslation",["skylark-utils-dom/query","./i18n","./Translator"],function(e,r,t){return r.addTranslation=function(e,r,n){t.create(e).getTranslation(r).then(function(e){assign(e,n)})}}),e("skylark-ui-i18n/getTranslations",["skylark-utils-dom/query","./i18n","./Translator"],function(e,r,t){return r.getTranslations=function(e,r,n){n=n||function(){},t.create(e).getTranslation(r).then(n)}}),e("skylark-ui-i18n/main",["./i18n","./Translator","./prepareDom","./translate","./addTranslation","./getTranslations"],function(e){return e}),e("skylark-ui-i18n",["skylark-ui-i18n/main"],function(e){return e})}(t,n),!a){var s=n("skylark-langx/skylark");i?module.exports=s:r.skylarkjs=s}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-ui-i18n.js.map
